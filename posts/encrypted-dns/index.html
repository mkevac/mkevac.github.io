<!doctype html>

<html lang="en-us">

<head>
  <title>Marko Kevac Home</title>
  <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="The HTML5 Herald" />
<meta name="author" content="" /><meta property="og:title" content="Encrypted DNS" />
<meta property="og:description" content="This is a bunch of notes taken from “DNS over HTTPS considerations” by Bert Hubert.
It’s an amazing talk and I recommend watching it. It covers the history of DNS security, privacy considerations, state-of-the-art and what awaits us in the future.
 DNS is one of the oldest text protocols that are still widely used. Almost everything else we encrypted already.
There have been four tries to encrypt DNS:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://marko.kevac.org/posts/encrypted-dns/" />
<meta property="article:published_time" content="2020-01-02T16:44:49+03:00" />
<meta property="article:modified_time" content="2020-01-02T16:44:49+03:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Encrypted DNS"/>
<meta name="twitter:description" content="This is a bunch of notes taken from “DNS over HTTPS considerations” by Bert Hubert.
It’s an amazing talk and I recommend watching it. It covers the history of DNS security, privacy considerations, state-of-the-art and what awaits us in the future.
 DNS is one of the oldest text protocols that are still widely used. Almost everything else we encrypted already.
There have been four tries to encrypt DNS:"/>

<meta name="generator" content="Hugo 0.62.0" />
    

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="http://marko.kevac.org/fontawesome/css/all.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="/css/styles.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="/">Marko Kevac Home</a>
            </h1>

      <ul id="social-media">
      </ul>
      
    </header>

    
<nav>
    <ul>
        
    </ul>
</nav>

    <main>




<article>

    <h1>Encrypted DNS</h1>

    
    <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2020-01-02T16:44:49&#43;03:00">Jan 2, 2020</time>
        </li>
        
        <li>
            Categories:
            <em>
                
                    
                    <a href="/categories/notes">notes</a>
                
                    , 
                    <a href="/categories/talks">talks</a>
                
            </em>
        </li>
        

        
        <li>
            <em>
                
                    
                    <a href="/tags/dns">#dns</a>
                
                    , 
                    <a href="/tags/networking">#networking</a>
                
                    , 
                    <a href="/tags/security">#security</a>
                
                    , 
                    <a href="/tags/tls">#tls</a>
                
                    , 
                    <a href="/tags/talks">#talks</a>
                
            </em>
        </li>
        

        <li>3 minutes read</li>
    </ul>
</aside>

    

    

    
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/pjin3nv8jAo" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>This is a bunch of notes taken from <a href="https://www.youtube.com/watch?v=pjin3nv8jAo">“DNS over HTTPS considerations”</a> by Bert Hubert.</p>
<p>It’s an amazing talk and I recommend watching it. It covers the history of DNS security, privacy considerations, state-of-the-art and what awaits us in the future.</p>
<hr>
<p>DNS is one of the oldest text protocols that are still widely used. Almost everything else we encrypted already.</p>
<p>There have been four tries to encrypt DNS:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Domain_Name_System_Security_Extensions">DNSSEC</a> 1998-2015</li>
<li><a href="https://en.wikipedia.org/wiki/DNSCurve">DNSCurve/DNSCrypto</a> 2009</li>
<li><a href="https://en.wikipedia.org/wiki/DNS_over_TLS">DNS over TLS</a> 2015</li>
<li><a href="https://en.wikipedia.org/wiki/DNS_over_HTTPS">DNS over HTTPS</a> 2018</li>
</ul>
<p>None of them got traction for various reasons. But recently there has been a push to improve users&rsquo; privacy.</p>
<hr>
<p>You can use HTTPS and nobody will know what you are looking at, but the site you are using will be know because DNS is unencrypted.
It’s similar to phone calls. You can encrypt audio, but your operator will know who you are talking to. And that can be enough to lose your privacy.</p>
<p>DNS is not the only thing that leaks data about what site you are using. There are more leak vectors.</p>
<p>Metadata privacy leaks:</p>
<ul>
<li>HTTP attempts</li>
<li>DNS lookups</li>
<li><a href="https://en.wikipedia.org/wiki/Server_Name_Indication">(e)SNI</a></li>
<li><a href="https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol">OCSP</a></li>
<li>IP address</li>
</ul>
<p><strong>HTTP attempts</strong>. Often you would first go to unsecured plain text site and then be redirected to secure one. But the site you are going to has already been leaked.</p>
<p><strong>DNS lookups</strong>. If your DNS lookups are not encrypted, you leak names of sites you are going to.</p>
<p><strong>(e)SNI</strong>. One IP address can host several HTTPS sites and the way to tell which site you want is to use SNI and SNI is not encrypted.</p>
<p><strong>OCSP</strong>. Browsers must check whether HTTPS certificate is valid or not and they use OCSP for that and, guess what, OCSP is not encrypted.</p>
<p><strong>IP address</strong>. One IP address can host thousands of sites, but in reality, it’s often the case that it’s easy to map an IP address to the site name.</p>
<hr>
<p>You can set up a tunnel to someone you trust. But then they will know all of this.</p>
<hr>
<p>Browsers want to stop using user’s DNS servers and use Google’s or Cloudflare’s DNS servers over HTTPS to ensure that requests are private. Sometimes they call this DNS over Cloud.</p>
<p>Things that can break:</p>
<ul>
<li>Security filtering. Some filters block ads or other bad sites according to DNS names. They will stop working</li>
<li>Security monitoring. Pretty much the same thing, but done as a privacy thing in a corporate environment for example.</li>
<li>CDN performance. It would be harder to send your request to your nearest servers for speed improvement.</li>
<li>Split horizon/VPN. If you are using VPN to tunnel into the private network then DNS requests for your private sites will go to Google or Cloudflare and they would learn about the names of your private sites.</li>
<li>Your privacy. Non-Americans have no privacy expectations according to <a href="https://en.wikipedia.org/wiki/Foreign_Intelligence_Surveillance_Act_of_1978_Amendments_Act_of_2008">FISA 702</a> law. And both Google and Cloudflare are US companies.</li>
</ul>
<p>There is a potential to track users with DNS over HTTP because of a persistence feature that speeds up encryption (resumption cookies). You can disable this feature sometimes, but there is always a tradeoff between simplicity and privacy.</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="http://marko.kevac.org/posts/new-blog/"><i class="fa fa-chevron-circle-left"></i> New Blog (Hello World)</a>
        </li>
        
        
    </ul>
</section>
    
    





</main>
    <footer>
        <h6> |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="http://marko.kevac.org/index.xml">Subscribe </a></h6>
    </footer>
</div>
<script src="/js/scripts.js"></script>

</body>

</html>

